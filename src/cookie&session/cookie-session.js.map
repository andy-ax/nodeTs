{"version":3,"file":"cookie-session.js","sourceRoot":"","sources":["cookie-session.ts"],"names":[],"mappings":";;;AAAA,uCAAkC;AAClC,qCAAgC;AAChC,0CAAkC;AAElC,MAAa,aAAa;IAItB,MAAM,CAAC,MAAM;QACT,eAAM,CAAC,SAAS,CAAC;YACb,MAAM,EAAE,IAAI,CAAC,YAAY;YACzB,MAAM,EAAE,WAAG;YACX,IAAI,EAAE,GAAG;YACT,QAAQ,EAAE,IAAI;SACjB,CAAC,CAAC;QACH,iBAAO,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC1C,eAAM,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,IAAS,EAAE,EAAE;YACzC,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YACpD,IAAI,CAAC,MAAM,CAAC,IAAI,CACZ,eAAM,CAAC,WAAW,CAAC,SAAS,EAAE,SAAS,GAAC,CAAC,CAAC,CAC7C,CAAC;QACN,CAAC,EAAE,CAAC,IAAY,EAAE,EAAE;YAChB,IAAI,CAAC,MAAM,CAAC,IAAI,CACZ,eAAM,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,CAAC,CACnC,CAAC;QACN,CAAC,CAAC,CAAA;IACN,CAAC;;AAtBL,sCAuBC;AAtBU,0BAAY,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACxC,2BAAa,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC","sourcesContent":["import {Session} from \"./session\";\r\nimport {Cookie} from \"./cookie\";\r\nimport {URL} from '../model/model'\r\n\r\nexport class CookieSession {\r\n    static cookieExpire = 1000 * 60 * 60 * 24 * 30;\r\n    static sessionExpire = 1000 * 60 * 20;\r\n\r\n    static config() {\r\n        Cookie.setOption({\r\n            maxAge: this.cookieExpire,\r\n            domain: URL,\r\n            path: '/',\r\n            httpOnly: true,\r\n        });\r\n        Session.configExpires(this.sessionExpire);\r\n        Cookie.cookieConfig('isVisit', (self: any) => {\r\n            const visitTime = parseInt(self.req.cookie.isVisit);\r\n            self.cookie.push(\r\n                Cookie.buildCookie('isVisit', visitTime+1)\r\n            );\r\n        }, (self: Cookie) => {\r\n            self.cookie.push(\r\n                Cookie.buildCookie('isVisit', 1)\r\n            );\r\n        })\r\n    }\r\n}"]}